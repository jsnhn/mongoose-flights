<%- include('../partials/header') %>

<h2>All Flights</h2>
<table>
  <thead>
    <tr>
      <th>Airline</th>
      <th>Airport</th>
      <th>Flight No.</th>
      <th>Departure</th>
    </tr>
  </thead>
  <tbody>
    <% flights.forEach(function(flight) { %>
      <tr>
        <td><%= flight.airline %></td>
        <td><%= flight.airport %></td>
        <td><%= flight.flightNo %></td>
        <td class="<%= flight.departs < new Date() ? 'expired' : '' %>">
            <%= flight.departs.toLocaleDateString('en-US', { 
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            }) %>
        </td>
        <td> 
          <a href="/flights/<%= flight._id %>">Details</a>
        </td>
      </tr>
      <% }); %>
  </tbody>
</table>

<%- include('../partials/footer') %>